import{W as q,d as me,aZ as he,i as _,a6 as ae,a_ as B,a$ as S,a2 as w,e as D,B as fe,u as be,N as ve,J as _e,S as Ne,f as k,b0 as x,p as Ve,b1 as Ie,H as ge,O as ye,b2 as Ee,o as v,g,j as Y,l,n as R,al as F,h as y,w as j,q as C,ad as ke,b3 as we,E as Z,y as Q,b4 as Ce,b5 as Se,x as T,a7 as $e,_ as Ae,b6 as Pe,a3 as xe,V as X,m as Fe,aI as se,aj as ee,ak as Te,k as b,t as te,aM as W,aW as Be,b7 as De,aJ as Me,aU as Ue,aV as ze,ah as Ke}from"./index-17847190.js";const Le=100,Oe=600,ne={beforeMount(t,r){const a=r.value,{interval:s=Le,delay:I=Oe}=q(a)?{}:a;let p,m;const i=()=>q(a)?a():a.handler(),f=()=>{m&&(clearTimeout(m),m=void 0),p&&(clearInterval(p),p=void 0)};t.addEventListener("mousedown",u=>{u.button===0&&(f(),i(),document.addEventListener("mouseup",()=>f(),{once:!0}),m=setTimeout(()=>{p=setInterval(()=>{i()},s)},I))})}},Re=me({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:he,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||_(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),We={[ae]:(t,r)=>r!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[B]:t=>_(t)||S(t),[w]:t=>_(t)||S(t)},Ye=["aria-label","onKeydown"],je=["aria-label","onKeydown"],Ge=D({name:"ElInputNumber"}),He=D({...Ge,props:Re,emits:We,setup(t,{expose:r,emit:a}){const s=t,{t:I}=fe(),p=be("input-number"),m=ve(),i=_e({currentValue:s.modelValue,userInput:null}),{formItem:f}=Ne(),u=k(()=>_(s.modelValue)&&s.modelValue<=s.min),N=k(()=>_(s.modelValue)&&s.modelValue>=s.max),oe=k(()=>{const e=H(s.step);return x(s.precision)?Math.max(H(s.modelValue),e):(e>s.precision,s.precision)}),M=k(()=>s.controls&&s.controlsPosition==="right"),G=Ve(),E=Ie(),U=k(()=>{if(i.userInput!==null)return i.userInput;let e=i.currentValue;if(S(e))return"";if(_(e)){if(Number.isNaN(e))return"";x(s.precision)||(e=e.toFixed(s.precision))}return e}),z=(e,n)=>{if(x(n)&&(n=oe.value),n===0)return Math.round(e);let o=String(e);const c=o.indexOf(".");if(c===-1||!o.replace(".","").split("")[c+n])return e;const A=o.length;return o.charAt(A-1)==="5"&&(o=`${o.slice(0,Math.max(0,A-1))}6`),Number.parseFloat(Number(o).toFixed(n))},H=e=>{if(S(e))return 0;const n=e.toString(),o=n.indexOf(".");let c=0;return o!==-1&&(c=n.length-o-1),c},J=(e,n=1)=>_(e)?z(e+s.step*n):i.currentValue,K=()=>{if(s.readonly||E.value||N.value)return;const e=Number(U.value)||0,n=J(e);$(n),a(B,i.currentValue)},L=()=>{if(s.readonly||E.value||u.value)return;const e=Number(U.value)||0,n=J(e,-1);$(n),a(B,i.currentValue)},O=(e,n)=>{const{max:o,min:c,step:d,precision:V,stepStrictly:A,valueOnClear:P}=s;o<c&&Pe("InputNumber","min should not be greater than max.");let h=Number(e);if(S(e)||Number.isNaN(h))return null;if(e===""){if(P===null)return null;h=xe(P)?{min:c,max:o}[P]:P}return A&&(h=z(Math.round(h/d)*d,V)),x(V)||(h=z(h,V)),(h>o||h<c)&&(h=h>o?o:c,n&&a(w,h)),h},$=(e,n=!0)=>{var o;const c=i.currentValue,d=O(e);if(!n){a(w,d);return}c!==d&&(i.userInput=null,a(w,d),a(ae,d,c),s.validateEvent&&((o=f==null?void 0:f.validate)==null||o.call(f,"change").catch(V=>X())),i.currentValue=d)},re=e=>{i.userInput=e;const n=e===""?null:Number(e);a(B,n),$(n,!1)},ue=e=>{const n=e!==""?Number(e):"";(_(n)&&!Number.isNaN(n)||e==="")&&$(n),i.userInput=null},ie=()=>{var e,n;(n=(e=m.value)==null?void 0:e.focus)==null||n.call(e)},ce=()=>{var e,n;(n=(e=m.value)==null?void 0:e.blur)==null||n.call(e)},de=e=>{a("focus",e)},pe=e=>{var n;a("blur",e),s.validateEvent&&((n=f==null?void 0:f.validate)==null||n.call(f,"blur").catch(o=>X()))};return ge(()=>s.modelValue,e=>{const n=O(i.userInput),o=O(e,!0);!_(n)&&(!n||n!==o)&&(i.currentValue=o,i.userInput=null)},{immediate:!0}),ye(()=>{var e;const{min:n,max:o,modelValue:c}=s,d=(e=m.value)==null?void 0:e.input;if(d.setAttribute("role","spinbutton"),Number.isFinite(o)?d.setAttribute("aria-valuemax",String(o)):d.removeAttribute("aria-valuemax"),Number.isFinite(n)?d.setAttribute("aria-valuemin",String(n)):d.removeAttribute("aria-valuemin"),d.setAttribute("aria-valuenow",String(i.currentValue)),d.setAttribute("aria-disabled",String(E.value)),!_(c)&&c!=null){let V=Number(c);Number.isNaN(V)&&(V=null),a(w,V)}}),Ee(()=>{var e;const n=(e=m.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${i.currentValue}`)}),r({focus:ie,blur:ce}),(e,n)=>(v(),g("div",{class:R([l(p).b(),l(p).m(l(G)),l(p).is("disabled",l(E)),l(p).is("without-controls",!e.controls),l(p).is("controls-right",l(M))]),onDragstart:n[1]||(n[1]=T(()=>{},["prevent"]))},[e.controls?Y((v(),g("span",{key:0,role:"button","aria-label":l(I)("el.inputNumber.decrease"),class:R([l(p).e("decrease"),l(p).is("disabled",l(u))]),onKeydown:F(L,["enter"])},[y(l(Z),null,{default:j(()=>[l(M)?(v(),C(l(ke),{key:0})):(v(),C(l(we),{key:1}))]),_:1})],42,Ye)),[[l(ne),L]]):Q("v-if",!0),e.controls?Y((v(),g("span",{key:1,role:"button","aria-label":l(I)("el.inputNumber.increase"),class:R([l(p).e("increase"),l(p).is("disabled",l(N))]),onKeydown:F(K,["enter"])},[y(l(Z),null,{default:j(()=>[l(M)?(v(),C(l(Ce),{key:0})):(v(),C(l(Se),{key:1}))]),_:1})],42,je)),[[l(ne),K]]):Q("v-if",!0),y(l($e),{id:e.id,ref_key:"input",ref:m,type:"number",step:e.step,"model-value":l(U),placeholder:e.placeholder,readonly:e.readonly,disabled:l(E),size:l(G),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:n[0]||(n[0]=T(()=>{},["prevent"])),onKeydown:[F(T(K,["prevent"]),["up"]),F(T(L,["prevent"]),["down"])],onBlur:pe,onFocus:de,onInput:re,onChange:ue},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Je=Ae(He,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const qe=Fe(Je);const Ze=D({data(){return{products:[{id:1001,name:"海尔立式热水器",price:1849,count:1},{id:1002,name:"Vue核心技术解析",price:43,count:1}],allcheck:!1}},computed:{total(){let t=0;return this.products.forEach(r=>{r.ischeck&&(t+=r.price*r.count)}),t}},methods:{selectProducts(t,r){this.all(),r?this.products.forEach(a=>{a.id==t&&(this.total+=a.price*a.count)}):this.products.forEach(a=>{a.id==t&&(this.total-=a.price*a.count)})},handleChange(t,r){if(this.products.length===0){this.total=0;return}this.total=0,this.$nextTick(()=>{this.products.forEach(a=>{a.count||(a.count=1),this.total+=a.price*a.count})})},changeAll(){this.allcheck=!this.allcheck,this.products.forEach(t=>{t.ischeck=this.allcheck}),this.allcheck?(this.total=0,this.products.forEach(t=>{this.total+=t.price*t.count})):this.total=0},all(){this.products.findIndex(r=>!r.ischeck)==-1?this.allcheck=!0:this.allcheck=!1},handleDelete(t,r){let a=this.products.findIndex(s=>s.id===t);a!==-1&&(r&&(this.total-=this.products[a].price*this.products[a].count),this.products.splice(a,1))}}}),le=t=>(Ue("data-v-bfc1113b"),t=t(),ze(),t),Qe=le(()=>b("div",{class:"cart"},"购物车",-1)),Xe={class:"product"},et={class:"name"},tt={class:"bars"},nt={class:"price"},at={class:"count"},st=le(()=>b("button",null,"购买",-1));function lt(t,r,a,s,I,p){const m=De,i=qe,f=Me;return v(),g(ee,null,[Qe,(v(!0),g(ee,null,Te(t.products,u=>(v(),g("div",{class:"products",key:u.id},[b("div",Xe,[b("div",et,[y(m,{label:u.name,modelValue:u.ischeck,"onUpdate:modelValue":N=>u.ischeck=N,size:"small",onChange:N=>t.selectProducts(u.id,u.ischeck)},null,8,["label","modelValue","onUpdate:modelValue","onChange"])]),b("div",tt,[b("span",nt,"￥"+te(u.price),1),b("span",at,[y(i,{modelValue:u.count,"onUpdate:modelValue":N=>u.count=N,min:1,max:9999,onChange:N=>t.handleChange(u.id,u.count)},null,8,["modelValue","onUpdate:modelValue","onChange"]),y(f,{size:"small",type:"danger",onClick:N=>t.handleDelete(u.id,u.ischeck)},{default:j(()=>[W(" 删除")]),_:2},1032,["onClick"])])])])]))),128)),W(" 全选"),Y(b("input",{type:"checkbox",onClick:r[0]||(r[0]=(...u)=>t.changeAll&&t.changeAll(...u)),"onUpdate:modelValue":r[1]||(r[1]=u=>t.allcheck=u)},null,512),[[Be,t.allcheck]]),b("div",null,[b("span",null,[W("合计：￥ "),b("span",null,te(t.total),1)]),st])],64)}const ot=se(Ze,[["render",lt],["__scopeId","data-v-bfc1113b"]]);const rt=D({data(){return{}},methods:{},components:{Cart:ot}});function ut(t,r,a,s,I,p){const m=Ke("Cart",!0);return v(),C(m)}const ct=se(rt,[["render",ut],["__scopeId","data-v-c11e0afd"]]);export{ct as default};
